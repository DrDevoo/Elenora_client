import{m as p,n as g,q as i,s as O,v as m,x as l}from"./index-9ddf0895.js";var P=Object.defineProperty,_=Object.defineProperties,b=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(e,r,t)=>r in e?P(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,I=(e,r)=>{for(var t in r||(r={}))y.call(r,t)&&u(e,t,r[t]);if(d)for(var t of d(r))w.call(r,t)&&u(e,t,r[t]);return e},h=(e,r)=>_(e,b(r)),E={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(e,{attrs:r,slots:t,emit:a}){const o=p(null),s=g({observer:null,intersected:!1,loaded:!1}),v=i(()=>s.intersected&&e.src?e.src:e.srcPlaceholder),f=i(()=>s.intersected&&e.srcset?e.srcset:!1),c=()=>{o.value&&o.value.getAttribute("src")!==e.srcPlaceholder&&(s.loaded=!0,a("load",o.value))},A=()=>a("error",o.value);return O(()=>{"IntersectionObserver"in window&&(s.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&(s.intersected=!0,s.observer.disconnect(),a("intersect"))},e.intersectionOptions),s.observer.observe(o.value))}),m(()=>{"IntersectionObserver"in window&&s.observer&&s.observer.disconnect()}),()=>{const n=l("img",h(I({ref:o,src:v.value,srcset:f.value||null},r),{class:[r.class,"v-lazy-image",{"v-lazy-image-loaded":s.loaded}],onLoad:c,onError:A}));return e.usePicture?l("picture",{ref:o,onLoad:c},s.intersected?[t.default,n]:[n]):n}}};export{E as i};
