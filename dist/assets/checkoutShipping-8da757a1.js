import{_ as k,r as z,o as l,c as n,b as e,a as v,w as f,t as p,d as r,F as b,f as S,m as d,q as u,x as m,g as V,h as c,L as g,p as C,l as U,s as w}from"./index-2918a254.js";const i=a=>(C("data-v-e98533e5"),a=a(),U(),a),q={class:"datas_w"},j={class:"logo_w"},T=i(()=>e("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),M={class:"cart_w"},F={class:"text"},N=i(()=>e("p",null,"Tekintsd meg a kosarad tartalmát",-1)),O={class:"price"},$={key:0},I={key:0,class:"cart"},E={class:"list"},L={class:"cart_item_imgtext"},B={class:"cart_item_img"},H=["src"],J={class:"cart_item_desc"},R={class:"quantity"},A={class:"cart_item_del"},D={class:"prices"},K=i(()=>e("p",null,"Összeg",-1)),G=V('<div class="order_status" data-v-e98533e5><div class="sec" data-v-e98533e5><div class="circle" data-v-e98533e5><p data-v-e98533e5>1</p></div><div class="title" data-v-e98533e5><p data-v-e98533e5>Adatok</p></div></div><div class="hr" data-v-e98533e5></div><div class="sec" data-v-e98533e5><div class="circle active" data-v-e98533e5><p class="active" data-v-e98533e5>2</p></div><div class="title" data-v-e98533e5><p data-v-e98533e5>Szállítás - Fizetés</p></div></div><div class="hr" data-v-e98533e5></div><div class="sec" data-v-e98533e5><div class="circle" data-v-e98533e5><p data-v-e98533e5>3</p></div><div class="title" data-v-e98533e5><p data-v-e98533e5>Összegzés</p></div></div></div>',1),P={class:"osszesites_w"},Q={class:"oszesites_b"},W={class:"left"},X=i(()=>e("p",{class:"t"},"Kapcsolattartás",-1)),Y={class:"c"},Z={class:"right"},x={class:"oszesites_b"},ee={class:"left"},se=i(()=>e("p",{class:"t"},"Szállítási cím",-1)),oe={class:"c"},te={class:"right"},ae=i(()=>e("h3",null,"Ajándékkártya vagy kupon kódja",-1)),ie={class:"cupon_b"},le={key:3},ne={key:4,style:{"background-color":"green"}},re={key:0},de={key:1,style:{color:"green"}},pe=i(()=>e("h3",null,"Számlázási cím",-1)),ue={class:"szamla_b"},ce=i(()=>e("label",{for:"same"},"Egyezik a szállítási címmel",-1)),he=i(()=>e("br",null,null,-1)),ve=i(()=>e("br",null,null,-1)),me=i(()=>e("label",{for:"other"},"Másik számlázási címet adok meg",-1)),_e={key:0,class:"otherszamlazasi"},ze={class:"inputflex"},ge={class:"inputflex"},ye=i(()=>e("h3",null,"Szállítás és fizetés",-1)),ke=i(()=>e("h5",{class:"mini"}," Ha a rendelés összege meghaladja a 15.000 Ft-ot a szállítás ingyenes! ",-1)),fe={class:"options_box"},be={class:"flex_option"},Se={class:"flex_option"},Ve=i(()=>e("label",{for:"id1"},"Házhozszállítás - Online fizetés",-1)),Ce=i(()=>e("div",null,[e("h6",null,"1990 Ft")],-1)),Ue={class:"flex_option"},we={class:"flex_option"},qe=i(()=>e("label",{for:"id2"},"Házhozszállítás - Utánvétes fizetés",-1)),je=i(()=>e("div",null,[e("h6",null,"2880 Ft")],-1)),Te=i(()=>e("br",null,null,-1)),Me={key:1,class:"btntovabb off"},Fe={key:2,class:"btntovabb"},Ne=i(()=>e("br",null,null,-1)),Oe=i(()=>e("br",null,null,-1)),$e={data(){return{showCart:!1,imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],epty:[],loadingcoupon:!1,cuponcode:"",cuponsresponse:[],cuponactive:!1}},async mounted(){await c.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(a=>this.order=a.data),this.order.usedcupon!=""&&(await c.get("https://elenora.hu:444/cupons/check/"+this.order.usedcupon).then(a=>this.cuponsresponse=a.data),this.cuponcode=this.order.usedcupon,this.cuponactive=!0,this.cart.forEach((a,s)=>{a.name!="Szállítási díj"?(console.log(a),this.cart[s].sale=this.cuponsresponse.cupon_value,console.log("fut")):console.log("elutasitva")}))},methods:{next(){this.loading=!0,console.log(this.cart),this.order.shipping=="delivery-cash"?(this.order.cart.reduce((s,o)=>s+Math.round(o.price-o.price/100*o.sale)*o.quantity,0)>14999?(this.order.cart.push({id:1,name:"Szállítási díj",price:0,quantity:1,sale:0,img:null}),this.order.cart.push({id:2,name:"Utánvét díj",price:890,quantity:1,sale:0,img:null})):(this.order.cart.push({id:1,name:"Szállítási díj",price:1990,quantity:1,sale:0,img:null}),this.order.cart.push({id:2,name:"Utánvét díj",price:890,quantity:1,sale:0,img:null})),c.post("https://elenora.hu:444/orders/updatecart/"+this.orderid,JSON.stringify(this.order.cart),{headers:{"Content-Type":"application/json"}})):(this.order.cart.reduce((s,o)=>s+Math.round(o.price-o.price/100*o.sale)*o.quantity,0)>14999?this.order.cart.push({id:1,name:"Szállítási díj",price:0,quantity:1,sale:0,img:null}):this.order.cart.push({id:1,name:"Szállítási díj",price:1990,quantity:1,sale:0,img:null}),c.post("https://elenora.hu:444/orders/updatecart/"+this.orderid,JSON.stringify(this.order.cart),{headers:{"Content-Type":"application/json"}})),c.post("https://elenora.hu:444/orders/saveshipping/"+this.orderid,JSON.stringify(this.order),{headers:{"Content-Type":"application/json"}}).then(a=>this.$router.push({path:"/shop/checkout/summary",query:{order:this.orderid}})).catch(a=>{console.error("There was an error!",a)})},backto(a){console.log("clicked"),a=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):a=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):a=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},async check(){this.loadingcoupon=!0,await c.get("https://elenora.hu:444/cupons/check/"+this.cuponcode).then(a=>this.cuponsresponse=a.data),this.cuponsresponse._id?(console.log("Kupon aktivalasa"),this.order.cart.forEach((a,s)=>{a.name!="Szállítási díj"?(console.log(a),this.order.cart[s].sale=this.cuponsresponse.cupon_value):console.log("elutasitva")}),c.post("https://elenora.hu:444/orders/updatecart/"+this.orderid,JSON.stringify(this.order.cart),{headers:{"Content-Type":"application/json"}}),await c.get("https://elenora.hu:444/orders/savecupon/"+this.orderid+"/"+this.cuponsresponse.cupon_name),this.cuponactive=!0):console.log("Hibas kupon!"),this.loadingcoupon=!1}}},Ie=Object.assign($e,{__name:"checkoutShipping",setup(a){return(s,o)=>{const y=z("RouterLink"),_=z("ion-icon");return l(),n("main",null,[e("section",q,[e("div",j,[v(y,{to:"/"},{default:f(()=>[T]),_:1})]),e("div",M,[e("div",{class:"header",onClick:o[0]||(o[0]=t=>s.showCart=!s.showCart)},[e("div",F,[v(_,{class:"cart_icon",name:"cart-outline"}),N,v(_,{name:"chevron-down-outline"})]),e("div",O,[e("b",null,[s.order.cart?(l(),n("p",$,p(s.order.cart.reduce((t,h)=>t+Math.round(h.price-h.price/100*h.sale)*h.quantity,0))+" Ft ",1)):r("",!0)])])]),s.showCart?(l(),n("div",I,[e("div",E,[(l(!0),n(b,null,S(s.order.cart,(t,h)=>(l(),n("div",{class:"cart_item",key:h},[e("div",L,[e("div",B,[t.img!=null?(l(),n("img",{key:0,src:s.imgurl+t.img},null,8,H)):r("",!0)]),e("div",J,[e("p",null,p(t.name),1),e("p",null,"Méret: "+p(t.size),1),e("p",R,p(t.quantity),1)])]),e("div",A,[e("h5",null,p(Math.round(t.price-t.price/100*t.sale))+" Ft ",1)])]))),128))]),e("div",D,[e("div",null,[K,e("b",null,[e("p",null,p(s.total)+" Ft",1)])])])])):r("",!0)]),G,e("div",P,[e("div",Q,[e("div",W,[X,e("p",Y,p(s.order.u_email),1)]),e("div",Z,[e("p",{class:"ch",onClick:o[1]||(o[1]=t=>s.backto("customer"))},"Módosítás")])]),e("div",x,[e("div",ee,[se,e("p",oe,p(s.order.u_postnumber)+" "+p(s.order.u_city)+", "+p(s.order.u_addresse)+", "+p(s.order.u_legio),1)]),e("div",te,[e("p",{class:"ch",onClick:o[2]||(o[2]=t=>s.backto("customer"))},"Módosítás")])])]),e("div",null,[ae,e("div",ie,[e("div",null,[s.cuponactive?r("",!0):d((l(),n("input",{key:0,type:"text","onUpdate:modelValue":o[3]||(o[3]=t=>s.cuponcode=t),placeholder:"Válts be kuponod"},null,512)),[[u,s.cuponcode]]),s.cuponactive?d((l(),n("input",{key:1,type:"text","onUpdate:modelValue":o[4]||(o[4]=t=>s.cuponcode=t),placeholder:"Válts be kuponod",disabled:""},null,512)),[[u,s.cuponcode]]):r("",!0),!s.loadingcoupon&&!s.cuponactive?(l(),n("button",{key:2,onClick:o[5]||(o[5]=t=>s.check())}," Beváltom ")):r("",!0),s.loadingcoupon?(l(),n("button",le,[v(g)])):r("",!0),s.cuponactive?(l(),n("button",ne," ✓ ")):r("",!0)]),s.cuponsresponse=="Érvénytelen kupon!"?(l(),n("p",re,"Érvénytelen kód!")):r("",!0),s.cuponsresponse._id?(l(),n("p",de,p(s.cuponsresponse.cupon_value)+"%-os kupon beváltva! ",1)):r("",!0)]),pe,e("div",ue,[d(e("input",{type:"radio",name:"szamla",value:"same",id:"same","onUpdate:modelValue":o[6]||(o[6]=t=>s.order.szamlazasimod=t)},null,512),[[m,s.order.szamlazasimod]]),ce,he,ve,d(e("input",{type:"radio",name:"szamla",value:"other",id:"other","onUpdate:modelValue":o[7]||(o[7]=t=>s.order.szamlazasimod=t)},null,512),[[m,s.order.szamlazasimod]]),me,s.order.szamlazasimod=="other"?(l(),n("div",_e,[d(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>s.order.szamlazasOrszag=t)},null,512),[[u,s.order.szamlazasOrszag]]),e("div",ze,[d(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=t=>s.order.szamlazasVezeteknev=t),placeholder:"Vezetéknév"},null,512),[[u,s.order.szamlazasVezeteknev]]),d(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>s.order.szamlazasUtonev=t),placeholder:"Utónév"},null,512),[[u,s.order.szamlazasUtonev]])]),e("div",ge,[d(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=t=>s.order.szamlazasIranyitoszam=t),placeholder:"Irányítószám"},null,512),[[u,s.order.szamlazasIranyitoszam]]),d(e("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=t=>s.order.szamlazasTelepules=t),placeholder:"Település"},null,512),[[u,s.order.szamlazasTelepules]])]),d(e("input",{type:"text","onUpdate:modelValue":o[13]||(o[13]=t=>s.order.szamlazasCim=t),placeholder:"Cím"},null,512),[[u,s.order.szamlazasCim]]),d(e("input",{type:"tel","onUpdate:modelValue":o[14]||(o[14]=t=>s.order.szamlazasTel=t),placeholder:"Telefonszám"},null,512),[[u,s.order.szamlazasTel]])])):r("",!0)]),ye,ke,e("div",fe,[e("div",be,[e("div",Se,[d(e("input",{type:"radio",name:"shipping",id:"id1",value:"delivery-card","onUpdate:modelValue":o[15]||(o[15]=t=>s.order.shipping=t),class:"radio"},null,512),[[m,s.order.shipping]]),Ve]),Ce]),e("div",Ue,[e("div",we,[d(e("input",{type:"radio",name:"shipping",id:"id2",value:"delivery-cash","onUpdate:modelValue":o[16]||(o[16]=t=>s.order.shipping=t),class:"radio"},null,512),[[m,s.order.shipping]]),qe]),je])]),Te,!s.loading&&s.order.shipping!=""?(l(),n("button",{key:0,class:"btntovabb",onClick:o[17]||(o[17]=(...t)=>s.next&&s.next(...t))}," Összegzés ")):r("",!0),!s.loading&&s.order.shipping==""?(l(),n("button",Me," Összegzés ")):r("",!0),s.loading?(l(),n("button",Fe,[v(g)])):r("",!0)])]),Ne,Oe])}}}),Le=k(Ie,[["__scopeId","data-v-e98533e5"]]);export{Le as default};
