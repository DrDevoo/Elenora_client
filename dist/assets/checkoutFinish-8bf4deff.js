import{k as g,r as _,o as d,c as a,b as s,a as n,w as m,t as c,F as k,f as y,d as l,g as b,h,L as z,p as f,n as C,q as w}from"./index-f700b14d.js";const r=e=>(f("data-v-c172d68c"),e=e(),C(),e),$={class:"datas_w"},S={class:"logo_w"},F=r(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},N={class:"text"},L=r(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),M={class:"price"},O={key:0,class:"cart"},I={class:"list"},T={class:"cart_item_imgtext"},V={class:"cart_item_img"},j=["src"],B={class:"cart_item_desc"},E={class:"quantity"},J={class:"cart_item_del"},R={class:"prices"},A=r(()=>s("p",null,"Összeg",-1)),H=b('<div class="order_status" data-v-c172d68c><div class="sec" data-v-c172d68c><div class="circle" data-v-c172d68c><p data-v-c172d68c>1</p></div><div class="title" data-v-c172d68c><p data-v-c172d68c>Adatok</p></div></div><div class="hr" data-v-c172d68c></div><div class="sec" data-v-c172d68c><div class="circle" data-v-c172d68c><p data-v-c172d68c>2</p></div><div class="title" data-v-c172d68c><p data-v-c172d68c>Szállítás - Fizetés</p></div></div><div class="hr" data-v-c172d68c></div><div class="sec" data-v-c172d68c><div class="circle active" data-v-c172d68c><p class="active" data-v-c172d68c>3</p></div><div class="title" data-v-c172d68c><p data-v-c172d68c>Összegzés</p></div></div></div>',1),D={class:"osszesites_w"},K={class:"oszesites_b"},U={class:"left"},G=r(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),P={class:"c"},Q={class:"right"},W={class:"oszesites_b"},X={class:"left"},Y=r(()=>s("p",{class:"t"},"Szállítási cím",-1)),Z={class:"c"},x={class:"right"},ss={class:"oszesites_b"},ts={class:"left"},es=r(()=>s("p",{class:"t"},"Szállítási mód",-1)),os={key:0,class:"c"},is={key:1,class:"c"},ds={class:"right"},as={class:"oszesites_b"},cs={class:"left"},rs=r(()=>s("p",{class:"t"},"Fizetési mód",-1)),ls={key:0,class:"c"},ns={key:1,class:"c"},hs={class:"right"},ps=r(()=>s("br",null,null,-1)),_s={key:2,class:"btntovabb"},us=r(()=>s("br",null,null,-1)),vs=r(()=>s("br",null,null,-1)),gs={data(){return{showCart:!1,cart:[],imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},created(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]")},mounted(){h.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(e=>this.order=e.data)},computed:{total(){return this.cart.reduce((e,t)=>e+t.price*t.quantity,0)}},methods:{next(){this.loading=!0,h.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(e=>this.$router.push({path:"/"})).catch(e=>{console.error("There was an error!",e)})},backto(e){console.log("clicked"),e=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):e=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):e=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,h.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(e=>{window.open(e.data.url,"_self")})}}},ms=Object.assign(gs,{__name:"checkoutFinish",setup(e){return(t,o)=>{const u=_("RouterLink"),p=_("ion-icon");return d(),a("main",null,[s("section",$,[s("div",S,[n(u,{to:"/"},{default:m(()=>[F]),_:1})]),s("div",q,[s("div",{class:"header",onClick:o[0]||(o[0]=i=>t.showCart=!t.showCart)},[s("div",N,[n(p,{class:"cart_icon",name:"cart-outline"}),L,n(p,{name:"chevron-down-outline"})]),s("div",M,[s("b",null,[s("p",null,c(t.total)+" Ft",1)])])]),t.showCart?(d(),a("div",O,[s("div",I,[(d(!0),a(k,null,y(t.cart,(i,v)=>(d(),a("div",{class:"cart_item",key:v},[s("div",T,[s("div",V,[i.img!=null?(d(),a("img",{key:0,src:t.imgurl+i.img},null,8,j)):l("",!0)]),s("div",B,[s("p",null,c(i.name),1),s("p",null,"Méret: "+c(i.size),1),s("p",E,c(i.quantity),1)])]),s("div",J,[s("h5",null,c(i.price)+" Ft",1)])]))),128))]),s("div",R,[s("div",null,[A,s("b",null,[s("p",null,c(t.total)+" Ft",1)])])])])):l("",!0)]),H,s("div",D,[s("div",K,[s("div",U,[G,s("p",P,c(t.order.u_email),1)]),s("div",Q,[s("p",{class:"ch",onClick:o[1]||(o[1]=i=>t.backto("customer"))},"Módosítás")])]),s("div",W,[s("div",X,[Y,s("p",Z,c(t.order.u_postnumber)+" "+c(t.order.u_city)+", "+c(t.order.u_addresse)+", "+c(t.order.u_legio),1)]),s("div",x,[s("p",{class:"ch",onClick:o[2]||(o[2]=i=>t.backto("customer"))},"Módosítás")])]),s("div",ss,[s("div",ts,[es,t.order.shipping=="delivery-cash"?(d(),a("p",os," Házhozszállítás ")):l("",!0),t.order.shipping=="delivery-card"?(d(),a("p",is," Házhozszállítás ")):l("",!0)]),s("div",ds,[s("p",{class:"ch",onClick:o[3]||(o[3]=i=>t.backto("shipping"))},"Módosítás")])]),s("div",as,[s("div",cs,[rs,t.order.shipping=="delivery-cash"?(d(),a("p",ls," Utánvétes fizetés ")):l("",!0),t.order.shipping=="delivery-card"?(d(),a("p",ns," Online fizetés ")):l("",!0)]),s("div",hs,[s("p",{class:"ch",onClick:o[4]||(o[4]=i=>t.backto("paying"))},"Módosítás")])])]),s("div",null,[ps,!t.loading&&this.order.shipping=="delivery-cash"?(d(),a("button",{key:0,class:"btntovabb",onClick:o[5]||(o[5]=i=>t.ordercash())}," Megrendelés ")):l("",!0),!t.loading&&this.order.shipping=="delivery-card"?(d(),a("button",{key:1,class:"btntovabb",onClick:o[6]||(o[6]=i=>t.orderpay())}," Fizetés és megrendelés ")):l("",!0),t.loading?(d(),a("button",_s,[n(z)])):l("",!0)])]),us,vs])}}}),ys=g(ms,[["__scopeId","data-v-c172d68c"]]);export{ys as default};
