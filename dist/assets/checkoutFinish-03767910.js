import{k as g,r as _,o as a,c as d,b as s,a as n,w as m,t as c,F as k,f as y,d as l,g as b,h,L as z,p as f,n as C,q as w}from"./index-50dbd189.js";const r=t=>(f("data-v-1ece04c2"),t=t(),C(),t),$={class:"datas_w"},S={class:"logo_w"},F=r(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},N={class:"text"},L=r(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),M={class:"price"},O={key:0,class:"cart"},I={class:"list"},T={class:"cart_item_imgtext"},V={class:"cart_item_img"},j=["src"],B={class:"cart_item_desc"},E={class:"quantity"},J={class:"cart_item_del"},R={class:"prices"},A=r(()=>s("p",null,"Összeg",-1)),H=b('<div class="order_status" data-v-1ece04c2><div class="sec" data-v-1ece04c2><div class="circle" data-v-1ece04c2><p data-v-1ece04c2>1</p></div><div class="title" data-v-1ece04c2><p data-v-1ece04c2>Adatok</p></div></div><div class="hr" data-v-1ece04c2></div><div class="sec" data-v-1ece04c2><div class="circle" data-v-1ece04c2><p data-v-1ece04c2>2</p></div><div class="title" data-v-1ece04c2><p data-v-1ece04c2>Szállítás - Fizetés</p></div></div><div class="hr" data-v-1ece04c2></div><div class="sec" data-v-1ece04c2><div class="circle active" data-v-1ece04c2><p class="active" data-v-1ece04c2>3</p></div><div class="title" data-v-1ece04c2><p data-v-1ece04c2>Összegzés</p></div></div></div>',1),D={class:"osszesites_w"},K={class:"oszesites_b"},U={class:"left"},G=r(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),P={class:"c"},Q={class:"right"},W={class:"oszesites_b"},X={class:"left"},Y=r(()=>s("p",{class:"t"},"Szállítási cím",-1)),Z={class:"c"},x={class:"right"},ss={class:"oszesites_b"},es={class:"left"},ts=r(()=>s("p",{class:"t"},"Szállítási mód",-1)),os={key:0,class:"c"},is={key:1,class:"c"},as={class:"right"},ds={class:"oszesites_b"},cs={class:"left"},rs=r(()=>s("p",{class:"t"},"Fizetési mód",-1)),ls={key:0,class:"c"},ns={key:1,class:"c"},hs={class:"right"},ps=r(()=>s("br",null,null,-1)),_s={key:2,class:"btntovabb"},us=r(()=>s("br",null,null,-1)),vs=r(()=>s("br",null,null,-1)),gs={data(){return{showCart:!1,cart:[],imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},created(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]")},mounted(){h.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(t=>this.order=t.data)},computed:{total(){return this.cart.reduce((t,e)=>t+e.price*e.quantity,0)}},methods:{next(){this.loading=!0,h.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(t=>this.$router.push({path:"/"})).catch(t=>{console.error("There was an error!",t)})},backto(t){console.log("clicked"),t=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):t=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):t=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,h.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(t=>{window.open(t.data.url,"_self")})}}},ms=Object.assign(gs,{__name:"checkoutFinish",setup(t){return(e,o)=>{const u=_("RouterLink"),p=_("ion-icon");return a(),d("main",null,[s("section",$,[s("div",S,[n(u,{to:"/"},{default:m(()=>[F]),_:1})]),s("div",q,[s("div",{class:"header",onClick:o[0]||(o[0]=i=>e.showCart=!e.showCart)},[s("div",N,[n(p,{class:"cart_icon",name:"cart-outline"}),L,n(p,{name:"chevron-down-outline"})]),s("div",M,[s("b",null,[s("p",null,c(e.total)+" Ft",1)])])]),e.showCart?(a(),d("div",O,[s("div",I,[(a(!0),d(k,null,y(e.cart,(i,v)=>(a(),d("div",{class:"cart_item",key:v},[s("div",T,[s("div",V,[i.img!=null?(a(),d("img",{key:0,src:e.imgurl+i.img},null,8,j)):l("",!0)]),s("div",B,[s("p",null,c(i.name),1),s("p",null,"Méret: "+c(i.size),1),s("p",E,c(i.quantity),1)])]),s("div",J,[s("h5",null,c(i.price)+" Ft",1)])]))),128))]),s("div",R,[s("div",null,[A,s("b",null,[s("p",null,c(e.total)+" Ft",1)])])])])):l("",!0)]),H,s("div",D,[s("div",K,[s("div",U,[G,s("p",P,c(e.order.u_email),1)]),s("div",Q,[s("p",{class:"ch",onClick:o[1]||(o[1]=i=>e.backto("customer"))},"Módosítás")])]),s("div",W,[s("div",X,[Y,s("p",Z,c(e.order.u_postnumber)+" "+c(e.order.u_city)+", "+c(e.order.u_addresse)+", "+c(e.order.u_legio),1)]),s("div",x,[s("p",{class:"ch",onClick:o[2]||(o[2]=i=>e.backto("customer"))},"Módosítás")])]),s("div",ss,[s("div",es,[ts,e.order.shipping=="delivery-cash"?(a(),d("p",os," Házhozszállítás ")):l("",!0),e.order.shipping=="delivery-card"?(a(),d("p",is," Házhozszállítás ")):l("",!0)]),s("div",as,[s("p",{class:"ch",onClick:o[3]||(o[3]=i=>e.backto("shipping"))},"Módosítás")])]),s("div",ds,[s("div",cs,[rs,e.order.shipping=="delivery-cash"?(a(),d("p",ls," Utánvétes fizetés ")):l("",!0),e.order.shipping=="delivery-card"?(a(),d("p",ns," Online fizetés ")):l("",!0)]),s("div",hs,[s("p",{class:"ch",onClick:o[4]||(o[4]=i=>e.backto("paying"))},"Módosítás")])])]),s("div",null,[ps,!e.loading&&e.order.shipping=="delivery-cash"?(a(),d("button",{key:0,class:"btntovabb",onClick:o[5]||(o[5]=i=>e.ordercash())}," Megrendelés ")):l("",!0),!e.loading&&e.order.shipping=="delivery-card"?(a(),d("button",{key:1,class:"btntovabb",onClick:o[6]||(o[6]=i=>e.orderpay())}," Fizetés és megrendelés ")):l("",!0),e.loading?(a(),d("button",_s,[n(z)])):l("",!0)])]),us,vs])}}}),ys=g(ms,[["__scopeId","data-v-1ece04c2"]]);export{ys as default};
