import{_ as g,r as u,o,c as i,b as s,a as h,w as b,t as n,d as r,F as y,f as k,g as m,h as p,L as z,p as f,l as C,s as w}from"./index-238c27b1.js";const l=d=>(f("data-v-debd0ad5"),d=d(),C(),d),$={class:"datas_w"},F={class:"logo_w"},S=l(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},M={class:"text"},N=l(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),L={class:"price"},O={key:0},I={key:0,class:"cart"},T={class:"list"},V={class:"cart_item_imgtext"},j={class:"cart_item_img"},B=["src"],E={class:"cart_item_desc"},R={class:"lineh"},A={key:0,class:"lineh"},H={key:1,class:"quantity"},J={class:"cart_item_del"},D={class:"prices"},K=l(()=>s("p",null,"Összeg",-1)),U=m('<div class="order_status" data-v-debd0ad5><div class="sec" data-v-debd0ad5><div class="circle" data-v-debd0ad5><p data-v-debd0ad5>1</p></div><div class="title" data-v-debd0ad5><p data-v-debd0ad5>Adatok</p></div></div><div class="hr" data-v-debd0ad5></div><div class="sec" data-v-debd0ad5><div class="circle" data-v-debd0ad5><p data-v-debd0ad5>2</p></div><div class="title" data-v-debd0ad5><p data-v-debd0ad5>Szállítás - Fizetés</p></div></div><div class="hr" data-v-debd0ad5></div><div class="sec" data-v-debd0ad5><div class="circle active" data-v-debd0ad5><p class="active" data-v-debd0ad5>3</p></div><div class="title" data-v-debd0ad5><p data-v-debd0ad5>Összegzés</p></div></div></div>',1),G={class:"osszesites_w"},P={class:"oszesites_b"},Q={class:"left"},W=l(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),X={class:"c"},Y={class:"right"},Z={class:"oszesites_b"},x={class:"left"},ss=l(()=>s("p",{class:"t"},"Szállítási cím",-1)),es={class:"c"},ts={class:"right"},ds={class:"oszesites_b"},os={class:"left"},is=l(()=>s("p",{class:"t"},"Szállítási mód",-1)),as={key:0,class:"c"},rs={key:1,class:"c"},ns={class:"right"},ls={class:"oszesites_b"},cs={class:"left"},hs=l(()=>s("p",{class:"t"},"Fizetési mód",-1)),ps={key:0,class:"c"},_s={key:1,class:"c"},us={class:"right"},vs=l(()=>s("br",null,null,-1)),gs={key:2,class:"btntovabb"},bs=l(()=>s("br",null,null,-1)),ys=l(()=>s("br",null,null,-1)),ks={data(){return{showCart:!1,imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},mounted(){p.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(d=>this.order=d.data)},methods:{next(){this.loading=!0,p.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(d=>this.$router.push({path:"/"})).catch(d=>{console.error("There was an error!",d)})},backto(d){console.log("clicked"),d=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):d=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):d=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,p.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.order.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(d=>{window.open(d.data.url,"_self")})}}},ms=Object.assign(ks,{__name:"checkoutFinish",setup(d){return(e,a)=>{const v=u("RouterLink"),_=u("ion-icon");return o(),i("main",null,[s("section",$,[s("div",F,[h(v,{to:"/"},{default:b(()=>[S]),_:1})]),s("div",q,[s("div",{class:"header",onClick:a[0]||(a[0]=t=>e.showCart=!e.showCart)},[s("div",M,[h(_,{class:"cart_icon",name:"cart-outline"}),N,h(_,{name:"chevron-down-outline"})]),s("div",L,[s("b",null,[e.order.cart?(o(),i("p",O,n(e.order.cart.reduce((t,c)=>t+Math.round(c.price-c.price/100*c.sale)*c.quantity,0))+" Ft ",1)):r("",!0)])])]),e.showCart?(o(),i("div",I,[s("div",T,[(o(!0),i(y,null,k(e.order.cart,(t,c)=>(o(),i("div",{class:"cart_item",key:c},[s("div",V,[s("div",j,[t.img!=null?(o(),i("img",{key:0,src:e.imgurl+t.img},null,8,B)):r("",!0)]),s("div",E,[s("p",R,n(t.name),1),t.visitno?r("",!0):(o(),i("p",A,"Méret: "+n(t.size),1)),t.visitno?r("",!0):(o(),i("p",H,n(t.quantity),1))])]),s("div",J,[s("h5",null,n(Math.round(t.price-t.price/100*t.sale))+" Ft",1)])]))),128))]),s("div",D,[s("div",null,[K,s("b",null,[s("p",null,n(e.total)+" Ft",1)])])])])):r("",!0)]),U,s("div",G,[s("div",P,[s("div",Q,[W,s("p",X,n(e.order.u_email),1)]),s("div",Y,[s("p",{class:"ch",onClick:a[1]||(a[1]=t=>e.backto("customer"))},"Módosítás")])]),s("div",Z,[s("div",x,[ss,s("p",es,n(e.order.u_postnumber)+" "+n(e.order.u_city)+", "+n(e.order.u_addresse)+", "+n(e.order.u_legio),1)]),s("div",ts,[s("p",{class:"ch",onClick:a[2]||(a[2]=t=>e.backto("customer"))},"Módosítás")])]),s("div",ds,[s("div",os,[is,e.order.shipping=="delivery-cash"?(o(),i("p",as," Házhozszállítás ")):r("",!0),e.order.shipping=="delivery-card"?(o(),i("p",rs," Házhozszállítás ")):r("",!0)]),s("div",ns,[s("p",{class:"ch",onClick:a[3]||(a[3]=t=>e.backto("shipping"))},"Módosítás")])]),s("div",ls,[s("div",cs,[hs,e.order.shipping=="delivery-cash"?(o(),i("p",ps," Utánvétes fizetés ")):r("",!0),e.order.shipping=="delivery-card"?(o(),i("p",_s," Online fizetés ")):r("",!0)]),s("div",us,[s("p",{class:"ch",onClick:a[4]||(a[4]=t=>e.backto("paying"))},"Módosítás")])])]),s("div",null,[vs,!e.loading&&e.order.shipping=="delivery-cash"?(o(),i("button",{key:0,class:"btntovabb",onClick:a[5]||(a[5]=t=>e.ordercash())}," Megrendelés ")):r("",!0),!e.loading&&e.order.shipping=="delivery-card"?(o(),i("button",{key:1,class:"btntovabb",onClick:a[6]||(a[6]=t=>e.orderpay())}," Fizetés és megrendelés ")):r("",!0),e.loading?(o(),i("button",gs,[h(z)])):r("",!0)])]),bs,ys])}}}),fs=g(ms,[["__scopeId","data-v-debd0ad5"]]);export{fs as default};
