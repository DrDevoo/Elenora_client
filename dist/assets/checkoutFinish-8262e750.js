import{k as g,r as p,o as a,c as d,b as s,a as c,w as m,t as r,F as k,f as y,d as n,g as b,h,L as z,p as f,n as C,q as w}from"./index-d693279e.js";const l=e=>(f("data-v-639a0291"),e=e(),C(),e),$={class:"datas_w"},S={class:"logo_w"},F=l(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},N={class:"text"},L=l(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),M={class:"price"},O={key:0,class:"cart"},I={class:"list"},T={class:"cart_item_imgtext"},V={class:"cart_item_img"},j=["src"],B={class:"cart_item_desc"},E={class:"quantity"},J={class:"cart_item_del"},R={class:"prices"},A=l(()=>s("p",null,"Összeg",-1)),H=b('<div class="order_status" data-v-639a0291><div class="sec" data-v-639a0291><div class="circle" data-v-639a0291><p data-v-639a0291>1</p></div><div class="title" data-v-639a0291><p data-v-639a0291>Adatok</p></div></div><div class="hr" data-v-639a0291></div><div class="sec" data-v-639a0291><div class="circle" data-v-639a0291><p data-v-639a0291>2</p></div><div class="title" data-v-639a0291><p data-v-639a0291>Szállítás - Fizetés</p></div></div><div class="hr" data-v-639a0291></div><div class="sec" data-v-639a0291><div class="circle active" data-v-639a0291><p class="active" data-v-639a0291>3</p></div><div class="title" data-v-639a0291><p data-v-639a0291>Összegzés</p></div></div></div>',1),D={class:"osszesites_w"},K={class:"oszesites_b"},U={class:"left"},G=l(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),P={class:"c"},Q={class:"right"},W={class:"oszesites_b"},X={class:"left"},Y=l(()=>s("p",{class:"t"},"Szállítási cím",-1)),Z={class:"c"},x={class:"right"},ss={class:"oszesites_b"},ts={class:"left"},es=l(()=>s("p",{class:"t"},"Szállítási mód",-1)),os={key:0,class:"c"},is={key:1,class:"c"},as={class:"right"},ds={class:"oszesites_b"},rs={class:"left"},ls=l(()=>s("p",{class:"t"},"Fizetési mód",-1)),ns={key:0,class:"c"},cs={key:1,class:"c"},hs={class:"right"},_s=l(()=>s("br",null,null,-1)),ps={key:2,class:"btntovabb"},us=l(()=>s("br",null,null,-1)),vs=l(()=>s("br",null,null,-1)),gs={data(){return{showCart:!1,cart:[],imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},created(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]")},mounted(){h.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(e=>this.order=e.data)},computed:{total(){return this.cart.reduce((e,t)=>e+t.price*t.quantity,0)}},methods:{next(){this.loading=!0,h.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(e=>this.$router.push({path:"/"})).catch(e=>{console.error("There was an error!",e)})},backto(e){console.log("clicked"),e=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):e=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):e=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,h.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(e=>{window.open(e.data.url,"_self")})}}},ms=Object.assign(gs,{__name:"checkoutFinish",setup(e){return(t,o)=>{const u=p("RouterLink"),_=p("ion-icon");return a(),d("main",null,[s("section",$,[s("div",S,[c(u,{to:"/"},{default:m(()=>[F]),_:1})]),s("div",q,[s("div",{class:"header",onClick:o[0]||(o[0]=i=>t.showCart=!t.showCart)},[s("div",N,[c(_,{class:"cart_icon",name:"cart-outline"}),L,c(_,{name:"chevron-down-outline"})]),s("div",M,[s("b",null,[s("p",null,r(t.total)+" Ft",1)])])]),t.showCart?(a(),d("div",O,[s("div",I,[(a(!0),d(k,null,y(t.cart,(i,v)=>(a(),d("div",{class:"cart_item",key:v},[s("div",T,[s("div",V,[i.img!=null?(a(),d("img",{key:0,src:t.imgurl+i.img},null,8,j)):n("",!0)]),s("div",B,[s("p",null,r(i.name),1),s("p",null,"Méret: "+r(i.size),1),s("p",E,r(i.quantity),1)])]),s("div",J,[s("h5",null,r(i.price)+" Ft",1)])]))),128))]),s("div",R,[s("div",null,[A,s("b",null,[s("p",null,r(t.total)+" Ft",1)])])])])):n("",!0)]),H,s("div",D,[s("div",K,[s("div",U,[G,s("p",P,r(this.order.u_email),1)]),s("div",Q,[s("p",{class:"ch",onClick:o[1]||(o[1]=i=>t.backto("customer"))},"Módosítás")])]),s("div",W,[s("div",X,[Y,s("p",Z,r(this.order.u_postnumber)+" "+r(this.order.u_city)+", "+r(this.order.u_addresse)+", "+r(this.order.u_legio),1)]),s("div",x,[s("p",{class:"ch",onClick:o[2]||(o[2]=i=>t.backto("customer"))},"Módosítás")])]),s("div",ss,[s("div",ts,[es,this.order.shipping=="delivery-cash"?(a(),d("p",os," Házhozszállítás ")):n("",!0),this.order.shipping=="delivery-card"?(a(),d("p",is," Házhozszállítás ")):n("",!0)]),s("div",as,[s("p",{class:"ch",onClick:o[3]||(o[3]=i=>t.backto("shipping"))},"Módosítás")])]),s("div",ds,[s("div",rs,[ls,this.order.shipping=="delivery-cash"?(a(),d("p",ns," Utánvétes fizetés ")):n("",!0),this.order.shipping=="delivery-card"?(a(),d("p",cs," Online fizetés ")):n("",!0)]),s("div",hs,[s("p",{class:"ch",onClick:o[4]||(o[4]=i=>t.backto("paying"))},"Módosítás")])])]),s("div",null,[_s,!t.loading&&this.order.shipping=="delivery-cash"?(a(),d("button",{key:0,class:"btntovabb",onClick:o[5]||(o[5]=i=>t.ordercash())}," Megrendelés ")):n("",!0),!t.loading&&this.order.shipping=="delivery-card"?(a(),d("button",{key:1,class:"btntovabb",onClick:o[6]||(o[6]=i=>t.orderpay())}," Fizetés és megrendelés ")):n("",!0),t.loading?(a(),d("button",ps,[c(z)])):n("",!0)])]),us,vs])}}}),ys=g(ms,[["__scopeId","data-v-639a0291"]]);export{ys as default};
