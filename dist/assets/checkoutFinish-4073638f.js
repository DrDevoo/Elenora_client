import{k as g,r as p,o as d,c as a,b as s,a as n,w as b,t as r,F as m,f as k,d as c,g as y,h,L as z,p as f,n as C,q as w}from"./index-04d755c7.js";const l=t=>(f("data-v-4b1508d9"),t=t(),C(),t),$={class:"datas_w"},S={class:"logo_w"},F=l(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},N={class:"text"},L=l(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),M={class:"price"},O={key:0,class:"cart"},I={class:"list"},T={class:"cart_item_imgtext"},V={class:"cart_item_img"},j=["src"],B={class:"cart_item_desc"},E={class:"quantity"},J={class:"cart_item_del"},R={class:"prices"},A=l(()=>s("p",null,"Összeg",-1)),H=y('<div class="order_status" data-v-4b1508d9><div class="sec" data-v-4b1508d9><div class="circle" data-v-4b1508d9><p data-v-4b1508d9>1</p></div><div class="title" data-v-4b1508d9><p data-v-4b1508d9>Adatok</p></div></div><div class="hr" data-v-4b1508d9></div><div class="sec" data-v-4b1508d9><div class="circle" data-v-4b1508d9><p data-v-4b1508d9>2</p></div><div class="title" data-v-4b1508d9><p data-v-4b1508d9>Szállítás - Fizetés</p></div></div><div class="hr" data-v-4b1508d9></div><div class="sec" data-v-4b1508d9><div class="circle active" data-v-4b1508d9><p class="active" data-v-4b1508d9>3</p></div><div class="title" data-v-4b1508d9><p data-v-4b1508d9>Összegzés</p></div></div></div>',1),D={class:"osszesites_w"},K={class:"oszesites_b"},U={class:"left"},G=l(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),P={class:"c"},Q={class:"right"},W={class:"oszesites_b"},X={class:"left"},Y=l(()=>s("p",{class:"t"},"Szállítási cím",-1)),Z={class:"c"},x={class:"right"},ss={class:"oszesites_b"},ts={class:"left"},es=l(()=>s("p",{class:"t"},"Szállítási mód",-1)),os={key:0,class:"c"},is={key:1,class:"c"},ds={class:"right"},as={class:"oszesites_b"},rs={class:"left"},ls=l(()=>s("p",{class:"t"},"Fizetési mód",-1)),cs={key:0,class:"c"},ns={key:1,class:"c"},hs={class:"right"},_s=l(()=>s("br",null,null,-1)),ps={key:2,class:"btntovabb"},us=l(()=>s("br",null,null,-1)),vs=l(()=>s("br",null,null,-1)),gs={data(){return{showCart:!1,cart:[],imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},created(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]")},mounted(){h.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(t=>this.order=t.data)},computed:{total(){return this.cart.reduce((t,e)=>t+e.price*e.quantity,0)}},methods:{next(){this.loading=!0,h.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(t=>this.$router.push({path:"/"})).catch(t=>{console.error("There was an error!",t)})},backto(t){console.log("clicked"),t=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):t=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):t=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,h.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(t=>{window.open(t.data.url,"_self")})}}},bs=Object.assign(gs,{__name:"checkoutFinish",setup(t){return(e,o)=>{const u=p("RouterLink"),_=p("ion-icon");return d(),a("main",null,[s("section",$,[s("div",S,[n(u,{to:"/"},{default:b(()=>[F]),_:1})]),s("div",q,[s("div",{class:"header",onClick:o[0]||(o[0]=i=>this.showCart=!this.showCart)},[s("div",N,[n(_,{class:"cart_icon",name:"cart-outline"}),L,n(_,{name:"chevron-down-outline"})]),s("div",M,[s("b",null,[s("p",null,r(e.total)+" Ft",1)])])]),this.showCart?(d(),a("div",O,[s("div",I,[(d(!0),a(m,null,k(e.cart,(i,v)=>(d(),a("div",{class:"cart_item",key:v},[s("div",T,[s("div",V,[i.img!=null?(d(),a("img",{key:0,src:e.imgurl+i.img},null,8,j)):c("",!0)]),s("div",B,[s("p",null,r(i.name),1),s("p",null,"Méret: "+r(i.size),1),s("p",E,r(i.quantity),1)])]),s("div",J,[s("h5",null,r(i.price)+" Ft",1)])]))),128))]),s("div",R,[s("div",null,[A,s("b",null,[s("p",null,r(e.total)+" Ft",1)])])])])):c("",!0)]),H,s("div",D,[s("div",K,[s("div",U,[G,s("p",P,r(this.order.u_email),1)]),s("div",Q,[s("p",{class:"ch",onClick:o[1]||(o[1]=i=>e.backto("customer"))},"Módosítás")])]),s("div",W,[s("div",X,[Y,s("p",Z,r(this.order.u_postnumber)+" "+r(this.order.u_city)+", "+r(this.order.u_addresse)+", "+r(this.order.u_legio),1)]),s("div",x,[s("p",{class:"ch",onClick:o[2]||(o[2]=i=>e.backto("customer"))},"Módosítás")])]),s("div",ss,[s("div",ts,[es,this.order.shipping=="delivery-cash"?(d(),a("p",os," Házhozszállítás ")):c("",!0),this.order.shipping=="delivery-card"?(d(),a("p",is," Házhozszállítás ")):c("",!0)]),s("div",ds,[s("p",{class:"ch",onClick:o[3]||(o[3]=i=>e.backto("shipping"))},"Módosítás")])]),s("div",as,[s("div",rs,[ls,this.order.shipping=="delivery-cash"?(d(),a("p",cs," Utánvétes fizetés ")):c("",!0),this.order.shipping=="delivery-card"?(d(),a("p",ns," Online fizetés ")):c("",!0)]),s("div",hs,[s("p",{class:"ch",onClick:o[4]||(o[4]=i=>e.backto("paying"))},"Módosítás")])])]),s("div",null,[_s,!e.loading&&this.order.shipping=="delivery-cash"?(d(),a("button",{key:0,class:"btntovabb",onClick:o[5]||(o[5]=i=>e.ordercash())}," Megrendelés ")):c("",!0),!e.loading&&this.order.shipping=="delivery-card"?(d(),a("button",{key:1,class:"btntovabb",onClick:o[6]||(o[6]=i=>e.orderpay())}," Fizetés és megrendelés ")):c("",!0),e.loading?(d(),a("button",ps,[n(z)])):c("",!0)])]),us,vs])}}}),ks=g(bs,[["__scopeId","data-v-4b1508d9"]]);export{ks as default};
