import{k as g,r as u,o as d,c as a,b as s,a as h,w as k,t as r,d as c,F as y,f as m,g as b,h as p,L as z,p as f,n as C,q as w}from"./index-33ea03a8.js";const n=o=>(f("data-v-688a56cd"),o=o(),C(),o),$={class:"datas_w"},F={class:"logo_w"},S=n(()=>s("img",{class:"logo",src:w,alt:"ELENORA"},null,-1)),q={class:"cart_w"},M={class:"text"},N=n(()=>s("p",null,"Tekintsd meg a kosarad tartalmát",-1)),L={class:"price"},O={key:0},I={key:0,class:"cart"},T={class:"list"},V={class:"cart_item_imgtext"},j={class:"cart_item_img"},B=["src"],E={class:"cart_item_desc"},R={class:"quantity"},A={class:"cart_item_del"},H={class:"prices"},J=n(()=>s("p",null,"Összeg",-1)),D=b('<div class="order_status" data-v-688a56cd><div class="sec" data-v-688a56cd><div class="circle" data-v-688a56cd><p data-v-688a56cd>1</p></div><div class="title" data-v-688a56cd><p data-v-688a56cd>Adatok</p></div></div><div class="hr" data-v-688a56cd></div><div class="sec" data-v-688a56cd><div class="circle" data-v-688a56cd><p data-v-688a56cd>2</p></div><div class="title" data-v-688a56cd><p data-v-688a56cd>Szállítás - Fizetés</p></div></div><div class="hr" data-v-688a56cd></div><div class="sec" data-v-688a56cd><div class="circle active" data-v-688a56cd><p class="active" data-v-688a56cd>3</p></div><div class="title" data-v-688a56cd><p data-v-688a56cd>Összegzés</p></div></div></div>',1),K={class:"osszesites_w"},U={class:"oszesites_b"},G={class:"left"},P=n(()=>s("p",{class:"t"},"Kapcsolattartás",-1)),Q={class:"c"},W={class:"right"},X={class:"oszesites_b"},Y={class:"left"},Z=n(()=>s("p",{class:"t"},"Szállítási cím",-1)),x={class:"c"},ss={class:"right"},ts={class:"oszesites_b"},es={class:"left"},os=n(()=>s("p",{class:"t"},"Szállítási mód",-1)),is={key:0,class:"c"},ds={key:1,class:"c"},as={class:"right"},rs={class:"oszesites_b"},cs={class:"left"},ns=n(()=>s("p",{class:"t"},"Fizetési mód",-1)),ls={key:0,class:"c"},hs={key:1,class:"c"},ps={class:"right"},_s=n(()=>s("br",null,null,-1)),us={key:2,class:"btntovabb"},vs=n(()=>s("br",null,null,-1)),gs=n(()=>s("br",null,null,-1)),ks={data(){return{showCart:!1,imgurl:"https://elenora.hu:444/getimage/",orderid:this.$route.query.order,loading:!1,order:[],cuponcode:null}},mounted(){p.get("https://elenora.hu:444/orders/getbyid/"+this.orderid).then(o=>this.order=o.data)},methods:{next(){this.loading=!0,p.post("https://elenora.hu:444/orders/finish/"+this.orderid,JSON.stringify(this.user),{headers:{"Content-Type":"application/json"}}).then(o=>this.$router.push({path:"/"})).catch(o=>{console.error("There was an error!",o)})},backto(o){console.log("clicked"),o=="shipping"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):o=="customer"?this.$router.push({path:"/shop/checkout",query:{order:this.orderid}}):o=="paying"?this.$router.push({path:"/shop/checkout/shipping",query:{order:this.orderid}}):console.log("err")},ordercash(){this.loading=!0,this.$router.push({path:"/shop/thanks",query:{id:this.order._id}})},orderpay(){this.loading=!0,p.post("https://elenora.hu:444/orders/pay",JSON.stringify({items:this.order.cart,orderid:this.orderid}),{headers:{"Content-Type":"application/json"}}).then(o=>{window.open(o.data.url,"_self")})}}},ys=Object.assign(ks,{__name:"checkoutFinish",setup(o){return(t,i)=>{const v=u("RouterLink"),_=u("ion-icon");return d(),a("main",null,[s("section",$,[s("div",F,[h(v,{to:"/"},{default:k(()=>[S]),_:1})]),s("div",q,[s("div",{class:"header",onClick:i[0]||(i[0]=e=>t.showCart=!t.showCart)},[s("div",M,[h(_,{class:"cart_icon",name:"cart-outline"}),N,h(_,{name:"chevron-down-outline"})]),s("div",L,[s("b",null,[t.order.cart?(d(),a("p",O,r(t.order.cart.reduce((e,l)=>e+Math.round(l.price-l.price/100*l.sale)*l.quantity,0))+" Ft ",1)):c("",!0)])])]),t.showCart?(d(),a("div",I,[s("div",T,[(d(!0),a(y,null,m(t.order.cart,(e,l)=>(d(),a("div",{class:"cart_item",key:l},[s("div",V,[s("div",j,[e.img!=null?(d(),a("img",{key:0,src:t.imgurl+e.img},null,8,B)):c("",!0)]),s("div",E,[s("p",null,r(e.name),1),s("p",null,"Méret: "+r(e.size),1),s("p",R,r(e.quantity),1)])]),s("div",A,[s("h5",null,r(Math.round(e.price-e.price/100*e.sale))+" Ft",1)])]))),128))]),s("div",H,[s("div",null,[J,s("b",null,[s("p",null,r(t.total)+" Ft",1)])])])])):c("",!0)]),D,s("div",K,[s("div",U,[s("div",G,[P,s("p",Q,r(t.order.u_email),1)]),s("div",W,[s("p",{class:"ch",onClick:i[1]||(i[1]=e=>t.backto("customer"))},"Módosítás")])]),s("div",X,[s("div",Y,[Z,s("p",x,r(t.order.u_postnumber)+" "+r(t.order.u_city)+", "+r(t.order.u_addresse)+", "+r(t.order.u_legio),1)]),s("div",ss,[s("p",{class:"ch",onClick:i[2]||(i[2]=e=>t.backto("customer"))},"Módosítás")])]),s("div",ts,[s("div",es,[os,t.order.shipping=="delivery-cash"?(d(),a("p",is," Házhozszállítás ")):c("",!0),t.order.shipping=="delivery-card"?(d(),a("p",ds," Házhozszállítás ")):c("",!0)]),s("div",as,[s("p",{class:"ch",onClick:i[3]||(i[3]=e=>t.backto("shipping"))},"Módosítás")])]),s("div",rs,[s("div",cs,[ns,t.order.shipping=="delivery-cash"?(d(),a("p",ls," Utánvétes fizetés ")):c("",!0),t.order.shipping=="delivery-card"?(d(),a("p",hs," Online fizetés ")):c("",!0)]),s("div",ps,[s("p",{class:"ch",onClick:i[4]||(i[4]=e=>t.backto("paying"))},"Módosítás")])])]),s("div",null,[_s,!t.loading&&t.order.shipping=="delivery-cash"?(d(),a("button",{key:0,class:"btntovabb",onClick:i[5]||(i[5]=e=>t.ordercash())}," Megrendelés ")):c("",!0),!t.loading&&t.order.shipping=="delivery-card"?(d(),a("button",{key:1,class:"btntovabb",onClick:i[6]||(i[6]=e=>t.orderpay())}," Fizetés és megrendelés ")):c("",!0),t.loading?(d(),a("button",us,[h(z)])):c("",!0)])]),vs,gs])}}}),bs=g(ys,[["__scopeId","data-v-688a56cd"]]);export{bs as default};
